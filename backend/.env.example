# Backend listening port
BACKEND_PORT=8787

# Backend Stacks network for tx verification fallback (mainnet|testnet)
BACKEND_STACKS_NETWORK=testnet

# Optional: override Hiro API base URL used to verify txid.
# Mainnet: https://api.hiro.so
# Testnet: https://api.testnet.hiro.so
# HIRO_API_BASE_URL=https://api.hiro.so

# Required in production: full contract id used by /tips verification.
# Dev fallback order: TIPS_CONTRACT_ID -> SOCIAL_TIPS_CONTRACT_ID -> VITE_SOCIAL_TIPS_CONTRACT_ID
# Example mainnet: SP... .frog-social-tips-v1
TIPS_CONTRACT_ID=ST18GQ5APPBQ0QF1ZR2CTCW6AV63EKT6T4FSMA9T0.frog-social-tips-reputation-v1
# SOCIAL_TIPS_CONTRACT_ID=SP18GQ5APPBQ0QF1ZR2CTCW6AV63EKT6T4EFYJMNW.frog-social-tips-v1
# VITE_SOCIAL_TIPS_CONTRACT_ID=SP18GQ5APPBQ0QF1ZR2CTCW6AV63EKT6T4EFYJMNW.frog-social-tips-v1

# Required: Supabase project URL and service role key.
# SUPABASE_URL example: https://xxxx.supabase.co
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# Optional: Supabase storage bucket for uploaded post images.
SUPABASE_STORAGE_BUCKET=frog-uploads

# -------------------------------
# Lightweight resilience tuning
# -------------------------------

# Hiro fetch timeout in milliseconds.
HIRO_TIMEOUT_MS=10000

# Global rate limit window in milliseconds.
RATE_LIMIT_WINDOW_MS=60000

# Per-IP max requests per window.
RATE_LIMIT_MAX_GENERAL=180
RATE_LIMIT_MAX_POSTS=20
RATE_LIMIT_MAX_TIPS=45
RATE_LIMIT_MAX_POST_LOOKUPS=240

# In-memory cache TTLs (milliseconds).
CACHE_TTL_POSTS_BY_HASH_MS=15000
CACHE_TTL_HIRO_TX_MS=20000
CACHE_TTL_VERIFY_TX_MS=20000
CACHE_TTL_STATS_MS=30000
CACHE_TTL_JOBS_STATS_MS=10000

# Async jobs polling / cleanup.
JOB_POLL_INTERVAL_MS=15000
JOB_BATCH_SIZE=6
JOB_RETRY_MAX_ATTEMPTS=8
JOB_CLEANUP_INTERVAL_MS=3600000
JOB_CLEANUP_DONE_AFTER_HOURS=168
JOB_CLEANUP_FAILED_AFTER_HOURS=720

# Idempotency for /posts (optional but recommended)
IDEMPOTENCY_TTL_MS=600000
IDEMPOTENCY_MAX_KEY_LENGTH=128
